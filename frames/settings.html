<!DOCTYPE html>
<html>

<head>
    <title>Flixtor</title>
    <!-- CSS -->
    <link href="../styles/bootstrap.min.css" rel="stylesheet">
    <link href="../styles/colpick.css" rel="stylesheet">
    <link href="../styles/bootly.css" rel="stylesheet">
    <link href="../styles/general.css" rel="stylesheet">

    <link href="../styles/settings.css" rel="stylesheet">

    <!-- Scripts -->
    <script type='text/javascript' src="../js/extensions/jquery.min.js"></script>
    <script type='text/javascript' src="../js/extensions/bootstrap.min.js"></script>
    <script src="../js/extensions/bootstrap-paginator.min.js"></script>
    <script src="../js/extensions/nwcontextmenu.js"></script>
    <script src="../js/extensions/colpick.js"></script>

    <!-- Modules -->
    <script>
        var main = require('../js/main.js');
        var translations = require('../js/translations.js');

        $(document).ready(function() {

            translations.initialize();
            translations.translateDefaults();

            //Scroll bar
            $(window).resize(function() {
                $("#settings").css('max-height', ($(window).height() - 95) + "px");
            });

            $(window).resize();
        });
    </script>
</head>

<body>
<div id="wrapper">
    <div id="top-bar">
        <a href="#" class="col-sm-2 col-xs-2 col-md-2 header-element">
            Flixtor
        </a>
        <a href="#" class="col-sm-2 col-xs-2 col-md-2 header-element menuMovies" onclick="main.changeFrame('movies')">

        </a>
        <a href="#" class="col-sm-2 col-xs-2 col-md-2 header-element menuSeries" onclick="main.changeFrame('series')">

        </a>
        <a href="#" class="col-sm-2 col-xs-2 col-md-2 header-element menuAnimes" onclick="main.changeFrame('animes')">

        </a>
        <a href="#" class="col-sm-2 col-xs-2 col-md-2 header-element menuTorrents" onclick="main.changeFrame('torrents')">

        </a>

        <div type="button" class="top-titlebar-minimize-button" title="" onclick="main.minimize();">
            <span class="glyphicon glyphicon-minus"></span>
        </div>
        <div type="button" class="top-titlebar-fullscreen-button" title="" onclick="main.toggleFullScreen();">
            <span class="glyphicon glyphicon-fullscreen"></span>
        </div>
        <div class="top-titlebar-close-button" onclick="main.closeApp();" title="">
            <span class="glyphicon glyphicon-remove"></span>
        </div>
    </div>
    <div id="content-wrapper">
        <div id="popup"></div>
        <div id="content">
            <script type="text/javascript">
                $(document).ready(function () {
                    var localization = require('../js/localization.js');
                    var settings = require('../js/settings.js');

                    var saved = translations.translate('Saved');
                    var restored = translations.translate('Restored');
                    var random = translations.translate('Random');

                    //Get prefered language
                    var language = settings.readConfig('language');
                    var languageDropdown = document.getElementById("language");
                    var i;
                    for (i = 0; i < languageDropdown.options.length; i++) {
                        if( languageDropdown.options[i].value === language) {
                            languageDropdown.options[i].selected = true;
                        }
                    }
                    $('#languageSaved').append(saved+' &nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    //Set prefered language
                    $('#language').change(function() {
                        var newLanguage = $(this).val();
                        settings.writeConfig('language', newLanguage);
                        //$('#languageSaved').show();
                        $('#languageSaved').fadeIn('fast', function(){
                            $('#languageSaved').fadeOut(1500);
                        });
                    });

                    //Get prefered metaProvider
                    var metaProvider = settings.readConfig('metaProvider');
                    var metaProviderDropdown = document.getElementById("metaProvider");
                    var i;
                    for (i = 0; i < metaProviderDropdown.options.length; i++) {
                        if( metaProviderDropdown.options[i].value === metaProvider) {
                            metaProviderDropdown.options[i].selected = true;
                        }
                    }
                    $('#metaProviderSaved').append(saved+' &nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    //Set prefered metaProvider
                    $('#metaProvider').change(function() {
                        var newmetaProvider = $(this).val();
                        settings.writeConfig('metaProvider', newmetaProvider);
                        //$('#metaProviderSaved').show();
                        $('#metaProviderSaved').fadeIn('fast', function(){
                            $('#metaProviderSaved').fadeOut(1500);
                        });
                    });

                    //Get subtitle
                    var subtitle = settings.readConfig('subtitle');
                    var subtititles = localization.subtitles;
                    for (var lang in subtititles) {
                        if( subtitle === lang ) {
                            $('#subtitles').append("<option selected value="+lang+">"+lang+"</option>");
                        }
                        else {
                            $('#subtitles').append("<option value="+lang+">"+lang+"</option>");
                        }
                    }
                    $('#subtitlesSaved').append(saved+' &nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    //Set subtitle
                    $('#subtitles').change(function() {
                        var newSubtitle = $(this).val();
                        settings.writeConfig('subtitle', newSubtitle);
                        $('#subtitlesSaved').fadeIn('fast', function(){
                            $('#subtitlesSaved').fadeOut(1500);
                        });
                    });

                    // Custom subtitle color
                    $('#subtitleColorSaved').append(saved+'&nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    $('#subtitleColor').colpick({
                        layout:'hex',
                        colorScheme:'dark',
                        color: settings.readConfig('subtitleColor'),
                        onSubmit:function(hsb,hex,rgb,el,bySetColor) {
                            $('#subtitleColor').colpickHide();
                            settings.writeConfig('subtitleColor', '#'+hex);
                            $('#subtitleColorSaved').fadeIn('fast', function(){
                                $('#subtitleColorSaved').fadeOut(1500);
                            });
                        }
                    });

                    //Get yts api endpoint
                    var ytsEndpoint = settings.readConfig('ytsEndpoint');
                    $('#ytsEndpoint').attr("placeholder",ytsEndpoint);
                    $('#ytsEndpointSaved').append(saved+'&nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    // Set connection limit
                    $('#ytsEndpoint').focusout(function() {
                        var newYtsEndpoint = $(this).val();
                        // Check the input
                        if( newYtsEndpoint.length >= 1 ) {
                            settings.writeConfig('ytsEndpoint', newYtsEndpoint);
                            $(this).attr("placeholder", newYtsEndpoint);
                            $('#ytsEndpointSaved').fadeIn('fast', function(){
                                $('#ytsEndpointSaved').fadeOut(1500);
                            });
                        }
                        else {
                            settings.writeConfig('ytsEndpoint', ytsEndpoint);
                            $(this).attr('placeholder', ytsEndpoint);
                            $('#ytsEndpointSaved').fadeIn('fast', function(){
                                $('#ytsEndpointSaved').fadeOut(1500);
                            });
                        }
                    });

                    //Get eztv api endpoint
                    var eztvEndpoint = settings.readConfig('eztvEndpoint');
                    $('#eztvEndpoint').attr("placeholder",eztvEndpoint);
                    $('#eztvEndpointSaved').append(saved+'&nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    // Set connection limit
                    $('#eztvEndpoint').focusout(function() {
                        var newEztvEndpoint = $(this).val();
                        // Check the input
                        if( newEztvEndpoint.length >= 1 ) {
                            settings.writeConfig('eztvEndpoint', newEztvEndpoint);
                            $(this).attr("placeholder", newEztvEndpoint);
                            $('#eztvEndpointSaved').fadeIn('fast', function(){
                                $('#eztvEndpointSaved').fadeOut(1500);
                            });
                        }
                        else {
                            settings.writeConfig('eztvEndpoint', eztvEndpoint);
                            $(this).attr('placeholder', eztvEndpoint);
                            $('#eztvEndpointSaved').fadeIn('fast', function(){
                                $('#eztvEndpointSaved').fadeOut(1500);
                            });
                        }
                    });

                    //Get kickass api endpoint
                    var kickassEndpoint = settings.readConfig('kickassEndpoint');
                    $('#kickassEndpoint').attr("placeholder",kickassEndpoint);
                    $('#kickassEndpointSaved').append(saved+'&nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    // Set connection limit
                    $('#kickassEndpoint').focusout(function() {
                        var newKickassEndpoint = $(this).val();
                        // Check the input
                        if( newKickassEndpoint.length >= 1 ) {
                            settings.writeConfig('kickassEndpoint', newKickassEndpoint);
                            $(this).attr("placeholder", newKickassEndpoint);
                            $('#kickassEndpointSaved').fadeIn('fast', function(){
                                $('#kickassEndpointSaved').fadeOut(1500);
                            });
                        }
                        else {
                            settings.writeConfig('kickassEndpoint', kickassEndpoint);
                            $(this).attr('placeholder', kickassEndpoint);
                            $('#kickassEndpointSaved').fadeIn('fast', function(){
                                $('#kickassEndpointSaved').fadeOut(1500);
                            });
                        }
                    });

                    //Get connection limit
                    var connectionLimit = settings.readConfig('connectionLimit');
                    $('#connectionLimit').attr("placeholder",connectionLimit);
                    $('#connectionLimitSaved').append(saved+'&nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    // Set connection limit
                    $('#connectionLimit').focusout(function() {
                        var newconnectionLimit = $(this).val();
                        // check if new value is numeric
                        if( isNaN(newconnectionLimit) === false && newconnectionLimit.length >= 1 ) {
                            settings.writeConfig('connectionLimit', newconnectionLimit);
                            $(this).attr("placeholder", newconnectionLimit);
                            $('#connectionLimitSaved').fadeIn('fast', function(){
                                $('#connectionLimitSaved').fadeOut(1500);
                            });
                        }
                        else {
                            settings.writeConfig('connectionLimit', connectionLimit);
                            $(this).attr('placeholder', connectionLimit);
                            $('#connectionLimitSaved').fadeIn('fast', function(){
                                $('#connectionLimitSaved').fadeOut(1500);
                            });
                        }
                    });

                    //Get dht
                    var dht = settings.readConfig('dht');
                    $('#dht').attr("placeholder",dht);
                    $('#dhtSaved').append(saved+'&nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    // Set connection limit
                    $('#dht').focusout(function() {
                        var newDht = $(this).val();
                        // check if new value is numeric
                        if( isNaN(newDht) === false && newDht.length >= 1 ) {
                            settings.writeConfig('dht', newDht);
                            $(this).attr("placeholder", newDht);
                            $('#dhtSaved').fadeIn('fast', function(){
                                $('#dhtSaved').fadeOut(1500);
                            });
                        }
                        else {
                            settings.writeConfig('dht', dht);
                            $(this).attr('placeholder', dht);
                            $('#dhtSaved').fadeIn('fast', function(){
                                $('#dhtSaved').fadeOut(1500);
                            });
                        }

                    });

                    //Get streaming port
                    var streamingPort = settings.readConfig('streamingPort');
                    if( streamingPort === '' ) {
                        $('#streamingPort').attr("placeholder", random);
                    }
                    else {
                        $('#streamingPort').attr("placeholder", streamingPort);
                    }
                    $('#streamingPortSaved').append(saved+' &nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    // Set streaming port
                    $('#streamingPort').focusout(function() {
                        var newstreamingPort = $(this).val();
                        // check if new value is numeric
                        if( isNaN(newstreamingPort) === false && newstreamingPort.length >= 1 ) {
                            settings.writeConfig('streamingPort', newstreamingPort);
                            $(this).attr("placeholder", newstreamingPort);
                            $('#streamingPortSaved').fadeIn('fast', function(){
                                $('#streamingPortSaved').fadeOut(1500);
                            });
                        }
                        else {
                            $(this).val('');
                            if( streamingPort === '' ) {
                                $(this).attr("placeholder", random);
                            }
                            else {
                                $(this).attr("placeholder", streamingPort);
                            }
                            $('#streamingPortSaved').fadeIn('fast', function(){
                                $('#streamingPortSaved').fadeOut(1500);
                            });
                        }
                    });

                    //Get cache directory
                    var cacheDir = settings.readConfig('cacheDir');
                    $('#cacheDir').attr("placeholder", cacheDir);
                    $('#cacheDirSaved').append(saved+' &nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    //Set cache directory
                    $('#cacheDir').click(function() {
                        $('#tmpLocation').click();
                    });
                    $('#tmpLocation').change(function() {
                        var newCacheDir = $(this).val();
                        if( newCacheDir !== '' ) {
                            $('#cacheDir').attr("placeholder", newCacheDir);
                            settings.writeConfig('cacheDir', newCacheDir);
                            $('#cacheDirSaved').fadeIn('fast', function(){
                                $('#cacheDirSaved').fadeOut(1500);
                            });
                        }
                        else {
                            cacheDir = settings.readConfig('cacheDir');
                            $('#cacheDir').attr('placeholder', cacheDir);
                        }
                    });

                    //Get clear cache status
                    var clearCache = settings.readConfig('clearCache');
                    if( clearCache === true ) {
                        $('#clearCache').prop('checked', true);
                    }
                    else {
                        $('#clearCache').prop('checked', false);
                    }
                    $('#clearCacheSaved').append(saved+' &nbsp;<span class="glyphicon glyphicon-ok"></span>');
                    //Set clear cache status
                    $('#clearCache').change(function() {
                        if($(this).is(':checked')) {
                            settings.writeConfig('clearCache', true);
                            $('#clearCacheSaved').fadeIn('fast', function(){
                                $('#clearCacheSaved').fadeOut(1500);
                            });
                        }
                        else {
                            settings.writeConfig('clearCache', false);
                            $('#clearCacheSaved').fadeIn('fast', function(){
                                $('#clearCacheSaved').fadeOut(1500);
                            });
                        }
                    });

                    $('#restoreDefaults').click(function() {
                        settings.restoreConfig();

                        var defaultLanguage = $('#language option[value="en"]');
                        defaultLanguage.attr('selected', 'selected');
                        var defaultMetaProvider = $('#metaProvider option[value="trakt"]');
                        defaultMetaProvider.attr('selected', 'selected');
                        var defaultsubtitle = $('#subtitles option[value=""]');
                        defaultsubtitle.attr('selected', 'selected');
                        $('#streamingPort').attr("placeholder", random);
                        $('#streamingPort').val('');
                        $('#ytsEndpoint').attr("placeholder", 'https://yts.re/api/');
                        $('#ytsEndpoint').val('');
                        $('#eztvEndpoint').attr("placeholder", 'http://eztvapi.re/');
                        $('#eztvEndpoint').val('');
                        $('#kickassEndpoint').attr("placeholder", 'https://kickass.so');
                        $('#kickassEndpoint').val('');
                        $('#connectionLimit').attr("placeholder", '100');
                        $('#connectionLimit').val('');
                        $('#dht').attr("placeholder", '500');
                        $('#dht').val('');
                        $('#cacheDir').attr("placeholder", './data');
                        $('#clearCache').prop('checked', true);
                        $('#restoreDefaultsSuccess').fadeIn('fast', function(){
                            $('#restoreDefaultsSuccess').fadeOut(1500);
                        });
                    });
                    $('#restoreDefaultsSuccess').append('&nbsp;&nbsp;'+restored+' &nbsp;<span class="glyphicon glyphicon-ok"></span>');
                });
            </script>


            <div class="p-10">
                <div id="settings">
                    <div class="form-horizontal">
                        <div><h3 class="defaultSettings"></h3></div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsLanguage"></div>
                            <div class="col-sm-4">
                                <select id="language" class="form-control">
                                    <option value="en">English</option>
                                    <option value="be">Belgium</option>
                                    <option value="cs">Czech</option>
                                    <option value="da">Danish</option>
                                    <option value="nl">Dutch</option>
                                    <option value="fi">Finnish</option>
                                    <option value="fr">French</option>
                                    <option value="de">German</option>
                                    <option value="gr">Greek</option>
                                    <option value="no">Norwegian</option>
                                    <option value="pt-br">Portuguese (Brazil)</option>
                                    <option value="ru">Russian</option>
                                    <option value="sk">Slovak</option>
                                    <option value="sv">Swedish</option>
                                    <option value="tr">Turkish</option>
                                </select>
                            </div>
                            <label id="languageSaved" style="display: none" class="control-label"></label>
                        </div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsMetaProvider"></div>
                            <div class="col-sm-4">
                                <select id="metaProvider" class="form-control">
                                    <option value="trakt">Trakt.tv</option>
                                    <option value="themoviedb">The moviedb</option>
                                </select>
                            </div>
                            <label id="metaProviderSaved" style="display: none" class="control-label"></label>
                        </div>
                        <div class="form-group">
                       <div style="padding-top: 7px" class="col-sm-2 settingsSubtitle"></div>
                           <div class="col-sm-4">
                               <select id="subtitles" class="form-control">
                                   <option value="">None</option>
                                   <option value="Afrikaans">Afrikaans</option>
                                   <option value="Arabic">Arabic</option>
                                   <option value="Bengali">Bengali</option>
                                   <option value="Brazilian">Brazilian</option>
                                   <option value="Brazilian-Portuguese">Brazilian-Portuguese</option>
                                   <option value="Bulgarian">Bulgarian</option>
                                   <option value="Bosnian">Bosnian</option>
                                   <option value="Chinese">Chinese</option>
                                   <option value="Croatian">Croatian</option>
                                   <option value="Czech">Czech</option>
                                   <option value="Danish">Danish</option>
                                   <option value="Dutch">Dutch</option>
                                   <option value="English">English</option>
                                   <option value="Estonian">Estonian</option>
                                   <option value="Farsi-Persian">Farsi-Persian</option>
                                   <option value="Finnish">Finnish</option>
                                   <option value="French">French</option>
                                   <option value="German">German</option>
                                   <option value="Greek">Greek</option>
                                   <option value="Hebrew">Hebrew</option>
                                   <option value="Hungarian">Hungarian</option>
                                   <option value="Indonesian">Indonesian</option>
                                   <option value="Italian">Italian</option>
                                   <option value="Japanese">Japanese</option>
                                   <option value="Korean">Korean</option>
                                   <option value="Lithuanian">Lithuanian</option>
                                   <option value="Macedonian">Macedonian</option>
                                   <option value="Malay">Malay</option>
                                   <option value="Norwegian">Norwegian</option>
                                   <option value="Polish">Polish</option>
                                   <option value="Portuguese">Portuguese</option>
                                   <option value="Romanian">Romanian</option>
                                   <option value="Russian">Russian</option>
                                   <option value="Serbian">Serbian</option>
                                   <option value="Slovak">Slovak</option>
                                   <option value="Slovenian">Slovenian</option>
                                   <option value="Spanish">Spanish</option>
                                   <option value="Swedish">Swedish</option>
                                   <option value="Thai">Thai</option>
                                   <option value="Turkish">Turkish</option>
                                   <option value="Urdu">Urdu</option>
                                   <option value="Ukrainian">Ukrainian</option>
                                   <option value="Vietnamese">Vietnamese</option>
                               </select>
                           </div>
                           <label id="subtitlesSaved" style="display: none" class="control-label"></label>
                       </div>

                        <div style="margin-top: 60px"><h3 class="playerSettings"></h3></div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsSubtitleColor"></div>
                            <div class="col-sm-4">
                                <button id="subtitleColor" type="button" class="btn btn-flixtor btn-sm"></button>
                            </div>
                            <label id="subtitleColorSuccess" style="display: none" class="control-label"></label>
                        </div>


                       <div style="margin-top: 60px"><h3 class="advancedSettings"></h3></div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsYtsEndpoint"></div>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="ytsEndpoint" placeholder="">
                            </div>
                            <label id="ytsEndpointSaved" style="display: none" class="control-label"></label>
                        </div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsEztvEndpoint"></div>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="eztvEndpoint" placeholder="">
                            </div>
                            <label id="eztvEndpointSaved" style="display: none" class="control-label"></label>
                        </div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsKickassEndpoint"></div>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="kickassEndpoint" placeholder="">
                            </div>
                            <label id="kickassEndpointSaved" style="display: none" class="control-label"></label>
                        </div>
                       <div class="form-group">
                           <div style="padding-top: 7px" class="col-sm-2 settingsConnectionLimit"></div>
                           <div class="col-sm-4">
                               <input type="text" class="form-control" id="connectionLimit" placeholder="">
                           </div>
                           <label id="connectionLimitSaved" style="display: none" class="control-label"></label>
                       </div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsDht"></div>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="dht" placeholder="">
                            </div>
                            <label id="dhtSaved" style="display: none" class="control-label"></label>
                        </div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsStreamingPort"></div>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="streamingPort" placeholder="">
                            </div>
                            <label id="streamingPortSaved" style="display: none" class="control-label"></label>
                        </div>
                        <div class="form-group">
                            <div style="padding-top: 7px" class="col-sm-2 settingsCacheDir"></div>
                            <div class="col-sm-4">
                                <input type="text" class="form-control" id="cacheDir" readonly="readonly" placeholder="">
                                <input type="file" name="tmpLocation" id="tmpLocation" nwdirectory style="display: none;" />
                            </div>
                            <label id="cacheDirSaved" style="display: none" class="control-label"></label>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-2 settingsClearCache"></div>
                            <div class="col-sm-1">
                                <input type="checkbox" id="clearCache" value="">
                            </div>
                            <label id="clearCacheSaved" style="display: none"></label>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-2">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3">
                                <button id="restoreDefaults" type="button" class="btn btn-flixtor btn-sm"></button>
                            </div>
                            <label id="restoreDefaultsSuccess" style="display: none" class="control-label"></label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>

</html>
